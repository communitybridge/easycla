# Copyright The Linux Foundation and each contributor to CommunityBridge.
# SPDX-License-Identifier: MIT
swagger: '2.0'
info:
  title: CLA API
  version: '1.0'
basePath: /v3
schemes:
  - http
consumes:
  - application/json
produces:
  - application/json
securityDefinitions:
  OauthSecurity:
    type: oauth2
    flow: accessCode
    authorizationUrl: 'https://accounts.google.com/o/oauth2/v2/auth'
    tokenUrl: 'https://www.googleapis.com/oauth2/v4/token'
    scopes:
      admin: LF Admin scope
      project: Project Manager scope
      company: CLA Manager scope
      contrib: Contributor scope
tags:
  - name: services

paths:
  /ops/version:
    get:
      summary: API Version Information
      security: []
      operationId: getVersion
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/version'
      tags:
        - version

  /ops/health:
    get:
      summary: API Health Check
      security: []
      operationId: healthCheck
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/health'
        '503':
          description: ''
          schema:
            $ref: '#/definitions/health'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - health

  /api-docs:
    get:
      security: []
      summary: Get swagger documentation
      operationId: getDoc
      produces:
        - text/html
      responses:
        200:
          description: Success
      tags:
        - docs

  /swagger.json:
    get:
      security: []
      summary: Get swagger JSON
      operationId: getSwagger
      produces:
        - application/json
      responses:
        200:
          description: Success
      tags:
        - docs

  /users/search:
    get:
      summary: Search users
      description: Searches for matching users by field
      security:
        - OauthSecurity:
            - user
      operationId: searchUsers
      parameters:
        - $ref: '#/parameters/searchTerm'
        - $ref: '#/parameters/searchField'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/fullMatch'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/users'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - users

  /users/{userID}:
    get:
      summary: Get user by ID
      description: Returns a user for the provided user ID
      security:
        - OauthSecurity:
            - user
      operationId: getUser
      parameters:
        - name: userID
          description: the user ID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - users
    delete:
      summary: Delete user by ID
      description: Deletes a user when provided the user ID
      security:
        - OauthSecurity:
            - user
      operationId: deleteUser
      parameters:
        - name: userID
          description: the user ID
          in: path
          type: string
          required: true
      responses:
        '204':
          description: 'Success'
          schema:
            $ref: '#/definitions/user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - users

  /users:
    post:
      summary: Add user
      description: Creates a new user record
      security:
        - OauthSecurity:
            - user
      operationId: addUser
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - users
    put:
      summary: Update user
      description: Updates a new user record
      security:
        - OauthSecurity:
            - user
      operationId: updateUser
      parameters:
        - name: body
          in: body
          schema:
            $ref: '#/definitions/user-update'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - users

  /users/username/{userName}:
    get:
      summary: Get user by User Name
      description: Returns a user for the provided user name
      security:
        - OauthSecurity:
            - user
      operationId: getUserByUserName
      parameters:
        - name: userName
          description: the user name value
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - users

  /onboard/cla-manager/lfid/{lf_id}:
    get:
      summary: Get CLA Manager Request by LFID
      description: Get CLA Manager Request by LFID
      security:
        - OauthSecurity: []
      operationId: getCLAManagerRequestsByLFID
      parameters:
        - name: lf_id
          description: the user lfid
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/onboard-cla-manager-requests'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - onboard

  /onboard/cla-manager/requests/{request_id}:
    delete:
      summary: Deletes a CLA Manager Request by request id
      description: Deletes CLA Manager Request by request id
      security:
        - OauthSecurity: []
      operationId: deleteCLAManagerRequestsByRequestID
      parameters:
        - name: request_id
          description: the request id
          in: path
          type: string
          required: true
      responses:
        '204':
          $ref: '#/responses/resource-deleted'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - onboard

  /onboard/cla-manager:
    post:
      summary: CLA Manager Request
      description: CLA Manager Request
      security:
        - OauthSecurity: []
      operationId: createCLAManagerRequest
      parameters:
        - name: body
          in: body
          schema:
            $ref: '#/definitions/onboard-cla-manager-request'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/onboard-cla-manager-request'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - onboard

  /onboard/notification:
    post:
      summary: Onboard Send Notification/Message
      description: Onboard Send Notification/Message
      operationId: sendNotification
      security:
        - OauthSecurity: []
      parameters:
        - name: body
          in: body
          schema:
            $ref: '#/definitions/onboard-notification-request'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/onboard-notification-response'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - onboard

  /signatures/id/{signatureID}:
    get:
      summary: Get the signature by ID
      description: Returns the signature when provided the signature ID
      security:
        - OauthSecurity:
            - user
      operationId: getSignature
      parameters:
        - name: signatureID
          description: the signature ID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signature'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - signatures

  /signatures/project/{projectID}:
    get:
      summary: Get project signatures
      description: Returns a list of project signature models when provided the project ID
      security:
        - OauthSecurity: []
      operationId: getProjectSignatures
      parameters:
        - name: projectID
          description: the project ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/searchTerm'
        - $ref: '#/parameters/searchField'
        - $ref: '#/parameters/fullMatch'
        - $ref: '#/parameters/signatureType'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures

  /signatures/project/{projectID}/company/{companyID}:
    get:
      summary: Get project company signatures
      description: Returns a list of project signature models when provided the project ID and company ID
      security: []
      operationId: getProjectCompanySignatures
      parameters:
        - name: projectID
          description: the project ID
          in: path
          type: string
          required: true
        - name: companyID
          description: the company ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures

  /signatures/company/{companyID}:
    get:
      summary: Get company signatures
      description: Returns a list of company signatures when provided the company ID
      security:
        - OauthSecurity: []
      operationId: getCompanySignatures
      parameters:
        - name: companyID
          description: the company ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/companyName'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures

  /signatures/user/{userID}:
    get:
      summary: Get user signatures
      description: Returns a list of user signatures when provided the user ID
      security:
        - OauthSecurity: []
      operationId: getUserSignatures
      parameters:
        - name: userID
          description: the user ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/userName'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures

  /signatures/project/{projectID}/company/{companyID}/employee:
    get:
      summary: Get project company signatures for the employees
      description: Returns a list of employee project signature models when provided the project ID and company ID
      security:
        - OauthSecurity: []
      operationId: getProjectCompanyEmployeeSignatures
      parameters:
        - name: projectID
          description: the project ID
          in: path
          type: string
          required: true
        - name: companyID
          description: the company ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures

  /signatures/{signatureID}/gh-org-whitelist:
    get:
      summary: Signature Update
      security:
        - OauthSecurity: []
      operationId: getGitHubOrgWhitelist
      parameters:
        - name: signatureID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/github-org'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures
    delete:
      summary: Signature Update
      security:
        - OauthSecurity: []
      operationId: deleteGitHubOrgWhitelist
      parameters:
        - name: signatureID
          in: path
          type: string
          required: true
        - name: body
          in: body
          schema:
            $ref: '#/definitions/gh-org-whitelist'
      responses:
        '204':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/github-org'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures
    post:
      summary: Signature Update
      security:
        - OauthSecurity: []
      operationId: addGitHubOrgWhitelist
      parameters:
        - name: signatureID
          in: path
          type: string
          required: true
        - name: body
          in: body
          schema:
            $ref: '#/definitions/gh-org-whitelist'
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/github-org'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - signatures

  # Project Service
  /project:
    post:
      summary: Create a Project/CLA Group
      security:
        - OauthSecurity: []
      operationId: createProject
      parameters:
        - name: body
          in: body
          schema:
            $ref: '#/definitions/project'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - project
    put:
      summary: Update Project by ID
      security:
        - OauthSecurity: []
      operationId: updateProject
      parameters:
        - name: body
          in: body
          schema:
            $ref: '#/definitions/project'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - project
    get:
      summary: Get Projects
      security:
        - OauthSecurity: []
      operationId: getProjects
      parameters:
        - $ref: '#/parameters/searchTerm'
        - $ref: '#/parameters/searchField'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/fullMatch'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/projects'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - project

  /project/{projectID}:
    parameters:
      - name: projectID
        in: path
        type: string
        required: true
    get:
      summary: Get Project by ID
      security:
        - OauthSecurity: []
      operationId: getProjectById
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - project
    delete:
      summary: Delete Project by ID
      security:
        - OauthSecurity: []
      operationId: deleteProjectById
      responses:
        '204':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - project

  /project/external/{externalID}:
    get:
      summary: Get Projects By External ID
      description: Returns a list of CLA groups associated with the specified external ID
      parameters:
        - name: externalID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
      security:
        - OauthSecurity: []
      operationId: getProjectsByExternalID
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/projects'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - project

  /project/name/{projectName}:
    get:
      summary: Get Project By Name
      description: Returns the project object when provided the project name - exact match
      parameters:
        - name: projectName
          in: path
          type: string
          required: true
      security:
        - OauthSecurity: []
      operationId: getProjectByName
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - project

  # Company Service
  /company:
    get:
      summary: Get all companies
      description: Returns a list of companies
      security:
        - OauthSecurity:
            - company
      operationId: getCompanies
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/companies'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}:
    get:
      summary: Get company
      description: Returns the company by ID
      security:
        - OauthSecurity:
            - company
      operationId: getCompany
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/user/{userID}:
    get:
      summary: API to retrieve a list of companies where the user is the manager
      security:
        - OauthSecurity:
            - company
      operationId: getCompaniesByUserManager
      parameters:
        - name: userID
          description: the user ID of the user manager
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/companies'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/user/{userID}/invites:
    get:
      summary: API to retrieve a list of companies where the user is the manager (approved) and in the invite list
      security:
        - OauthSecurity:
            - company
      operationId: getCompaniesByUserManagerWithInvites
      parameters:
        - name: userID
          description: the user ID of the user manager
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/companies-with-invites'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/search:
    get:
      summary: Search companies
      description: Searches for matching companies by name
      security:
        - OauthSecurity:
            - company
      operationId: searchCompany
      parameters:
        - name: companyName
          in: query
          type: string
          required: true
        - name: nextKey
          description: The next key to scan - used as a page offset for scanning batches of records
          in: query
          type: string
          required: false
          # UUID v4 regex
          pattern: '[a-f0-9]{8}-?[a-f0-9]{4}-?4[a-f0-9]{3}-?[89ab][a-f0-9]{3}-?[a-f0-9]{12}'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/companies'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}/cla/invitelist:
    get:
      summary: API to retrieve pending invite requests
      security:
        - OauthSecurity:
            - company
      operationId: getCompanyInviteRequests
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/company-invite-user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - company

  /company/{companyID}/{userID}/invitelist:
    get:
      summary: API to retrieve pending invite requests
      security:
        - OauthSecurity:
            - company
      operationId: getCompanyUserInviteRequests
      parameters:
        - name: companyID
          description: the company ID of the invitation
          in: path
          type: string
          required: true
        - name: userID
          description: the user ID of the invitation
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company-invite-user'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}/cla/accesslist:
    parameters:
      - name: companyID
        in: path
        type: string
        required: true
      - name: user
        in: body
        schema:
          $ref: '#/definitions/access-list-user'
    post:
      summary: Add user to CLA accesslist
      security:
        - OauthSecurity:
            - company
      operationId: addUsertoCompanyAccessList
      responses:
        '200':
          description: 'Success'
          schema:
            type: object
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - company
    delete:
      summary: Delete user from pending invites
      security:
        - OauthSecurity:
            - company
      operationId: deletePendingInvite
      responses:
        '200':
          description: 'Success'
          schema:
            type: object
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - company

  /company/{companyID}/invite-request:
    post:
      summary: Send Email to Company Admins for Request of Access to be a CLA Manager
      security:
        - OauthSecurity:
            - company
      operationId: sendInviteRequest
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - in: body
          name: body
          schema:
            $ref: '#/definitions/user'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            type: object
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - company


  /company/{companyID}/ccla-whitelist-requests/{projectID}:
    get:
      summary: get ccla whitelist requests for given company and project
      security:
        - OauthSecurity:
            - user
      operationId: listCclaWhitelistRequestsByCompanyAndProject
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - name: projectID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/ccla-whitelist-request-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company
    post:
      summary: create ccla Approval request for given project
      security: []
      operationId: addCclaWhitelistRequest
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - name: projectID
          in: path
          type: string
          required: true
        - in: body
          name: body
          schema:
            $ref: '#/definitions/ccla-whitelist-request-input'
          required: true
      responses:
        '200':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}/ccla-whitelist-requests/{projectID}/user/{userID}:
    get:
      summary: get ccla whitelist requests for given company, project, user
      security:
        - OauthSecurity:
            - user
      operationId: listCclaWhitelistRequestsByCompanyAndProjectAndUser
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - name: projectID
          in: path
          type: string
          required: true
        - name: userID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/ccla-whitelist-request-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}/ccla-whitelist-requests/{projectID}/{requestID}/approve:
    put:
      summary: Approve CCLA whitelist request
      security:
        - OauthSecurity:
            - company
      operationId: approveCclaWhitelistRequest
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - name: projectID
          in: path
          type: string
          required: true
        - name: requestID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}/ccla-whitelist-requests/{projectID}/{requestID}/reject:
    put:
      summary: Reject CCLA whitelist request
      security:
        - OauthSecurity:
            - company
      operationId: rejectCclaWhitelistRequest
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - name: projectID
          in: path
          type: string
          required: true
        - name: requestID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /company/{companyID}/ccla-whitelist-requests:
    get:
      summary: get ccla whitelist requests for given company
      security:
        - OauthSecurity:
            - user
      operationId: listCclaWhitelistRequests
      parameters:
        - name: companyID
          in: path
          type: string
          required: true
        - name: projectID
          in: query
          type: string
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/ccla-whitelist-request-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company

  /template:
    get:
      summary: Get Available Templates
      security:
        - OauthSecurity: []
      operationId: getTemplates
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/template'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - template

  /clagroup/{claGroupId}/template:
    parameters:
      - name: claGroupId
        in: path
        type: string
        required: true
    post:
      summary: Create contract template for CLA Group
      security:
        - OauthSecurity: []
      operationId: createCLAGroupTemplate
      parameters:
        - in: body
          name: body
          schema:
            $ref: '#/definitions/create-cla-group-template'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/template-pdfs'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - template

  /github/login:
    get:
      summary: API to redirect to Github Auth flow
      security: []
      operationId: login
      parameters:
        - name: callback
          in: query
          type: string
          required: true
      responses:
        302:
          description: '302 response'
          headers:
            Location:
              type: 'string'
      tags:
        - github

  /github/redirect:
    get:
      summary: API that Github redirects to after successful auth
      security: []
      operationId: redirect
      parameters:
        - name: code
          in: query
          type: string
          required: true
        - name: state
          in: query
          type: string
          required: true
      responses:
        302:
          description: '302 response'
          headers:
            Location:
              type: 'string'
      tags:
        - github

  /github/org/{orgName}/exists:
    get:
      summary: API to fetch the GitHub Oranization Details
      security:
        - OauthSecurity: []
      operationId: getOrg
      parameters:
        - name: orgName
          in: path
          type: string
          required: true
      responses:
        200:
          description: 'Success'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        404:
          $ref: '#/responses/not-found'
      tags:
        - github

  /project/{projectSFID}/github/organizations:
    post:
      summary: API to add new gitHub oranization in the project
      security:
        - OauthSecurity: []
      operationId: addProjectGithubOrganization
      parameters:
        - name: projectSFID
          in: path
          type: string
          required: true
        - in: body
          name: body
          schema:
            $ref: '#/definitions/create-github-organization'
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/github-organization'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
      tags:
        - github-organizations
    get:
      summary: API to fetch the gitHub oranizations of the project
      security:
        - OauthSecurity: []
      operationId: getProjectGithubOrganizations
      parameters:
        - name: projectSFID
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/github-organizations'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
      tags:
        - github-organizations
  /project/{projectSFID}/github/organizations/{orgName}:
    delete:
      summary: API to delete gitHub oranization in the project
      security:
        - OauthSecurity: []
      operationId: deleteProjectGithubOrganization
      parameters:
        - name: projectSFID
          in: path
          type: string
          required: true
        - name: orgName
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
      tags:
        - github-organizations

  /project/{projectSFID}/github/repositories:
    post:
      summary: API to add the gitHub repository
      security:
        - OauthSecurity:
            - project
      operationId: addProjectGithubRepository
      parameters:
        - name: projectSFID
          in: path
          type: string
          required: true
        - in: body
          name: github-repository-input
          schema:
            $ref: '#/definitions/github-repository-input'
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/github-repository'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
      tags:
        - github-repositories
    get:
      summary: API to fetch the gitHub repositories of the project
      security:
        - OauthSecurity:
            - project
      operationId: getProjectGithubRepositories
      parameters:
        - name: projectSFID
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/list-github-repositories'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
      tags:
        - github-repositories
  /project/{projectSFID}/github/repositories/{repositoryID}:
    delete:
      summary: API to add the gitHub repository
      security:
        - OauthSecurity:
            - project
      operationId: deleteProjectGithubRepository
      parameters:
        - name: projectSFID
          in: path
          type: string
          required: true
        - name: repositoryID
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        404:
          $ref: '#/responses/not-found'
      tags:
        - github-repositories

  /events:
    get:
      summary: search events
      security:
        - OauthSecurity: []
      description: Returns list of events matching with search criteria
      operationId: searchEvents
      parameters:
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/sortOrder'
        - $ref: '#/parameters/eventType'
        - $ref: '#/parameters/userID'
        - $ref: '#/parameters/companyID'
        - $ref: '#/parameters/projectID'
        - $ref: '#/parameters/before'
        - $ref: '#/parameters/after'
        - $ref: '#/parameters/userName'
        - $ref: '#/parameters/companyName'
        - $ref: '#/parameters/searchTerm'
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/event-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - events

  /project/{projectID}/gerrits/{gerritID}:
    delete:
      summary: delete the gerrit
      description: Delete the gerrit
      security:
        - OauthSecurity:
            - project
      operationId: deleteGerrit
      parameters:
        - name: projectID
          in: path
          type: string
          required: true
        - name: gerritID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - gerrits

  /project/{projectID}/gerrits:
    post:
      summary: add the gerrit
      description: add the gerrit
      security:
        - OauthSecurity:
            - project
      operationId: addGerrit
      parameters:
        - name: projectID
          in: path
          type: string
          required: true
        - in: body
          name: add-gerrit-input
          schema:
            $ref: '#/definitions/add-gerrit-input'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/gerrit'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - gerrits

# Common parameters
parameters:
  pageSize:
    name: pageSize
    description: The maximum number of results per page, value must be a positive integer value
    in: query
    type: integer
    required: false
    minimum: 0
    exclusiveMinimum: true
  companyName:
    name: companyName
    description: The optional company name filter
    in: query
    type: string
    required: false
    pattern: '^\w+$'
  userName:
    name: userName
    description: The optional user name filter
    in: query
    type: string
    required: false
    pattern: '^\w+$'
  searchField:
    name: searchField
    description: The optional user name filter
    in: query
    type: string
    required: false
    pattern: '^\w+$'
  searchTerm:
    name: searchTerm
    description: The optional search filter
    in: query
    type: string
    required: false
  fullMatch:
    name: fullMatch
    in: query
    type: boolean
    default: false
    required: false
  signatureType:
    name: signatureType
    in: query
    type: string
    required: false
    enum: [ccla,cla]
  nextKey:
    name: nextKey
    description: The next key to scan - used as a page offset for scanning batches of records
    in: query
    type: string
    required: false
    # UUID v4 regex
    # pattern: '[a-f0-9]{8}-?[a-f0-9]{4}-?4[a-f0-9]{3}-?[89ab][a-f0-9]{3}-?[a-f0-9]{12}'
  sortOrder:
    name: sortOrder
    in: query
    description: Sort order
    type: string
    enum: [asc, desc]
  eventType:
    name: eventType
    description: Type of the event
    in: query
    type: string
  userID:
    name: userID
    description: unique id of the user
    in: query
    type: string
  projectID:
    name: projectID
    description: unique id of the project
    in: query
    type: string
  companyID:
    name: company_id
    description: unique id of the company
    in: query
    type: string
  before:
    name: before
    description: return result created before this time.
    in: query
    type: string
  after:
    name: after
    description: return result created after this time.
    in: query
    type: string

definitions:
  version:
    type: object
    x-nullable: false
    title: Version
    description: Version Information
    properties:
      version:
        type: string
      commit:
        type: string
      branch:
        type: string
      buildDate:
        type: string
    required:
      - version
      - commit
      - branch
      - buildDate

  user:
    type: object
    x-nullable: false
    title: User
    description: User model
    properties:
      userID:
        type: string
      userExternalID:
        type: string
      username:
        type: string
      dateCreated:
        type: string
      dateModified:
        type: string
      lfEmail:
        type: string
      lfUsername:
        type: string
      companyID:
        type: string
      githubID:
        type: string
      githubUsername:
        type: string
      admin:
        type: boolean
      version:
        type: string
      note:
        type: string
      emails:
        type: array
        items:
          type: string

  user-update:
    type: object
    title: User
    description: User update model
    properties:
      userID:
        type: string
      userExternalID:
        type: string
      username:
        type: string
      lfEmail:
        type: string
      lfUsername:
        type: string
      companyID:
        type: string
      githubID:
        type: string
      githubUsername:
        type: string
      admin:
        type: boolean
      note:
        type: string
      emails:
        type: array
        items:
          type: string

  users:
    type: object
    x-nullable: false
    title: Users
    description: A list of users
    properties:
      searchField:
        type: string
      searchTerm:
        type: string
      fullMatch:
        type: boolean
      resultCount:
        type: integer
        format: int64
        x-omitempty: false
      totalCount:
        type: integer
        format: int64
        x-omitempty: false
      lastKeyScanned:
        type: string
      users:
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/user'

  onboard-cla-manager-requests:
    type: object
    x-nullable: false
    title: Onboard CLA Manager Models
    description: Onboard CLA Manager Request Models
    properties:
      requests:
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/onboard-cla-manager-request'

  onboard-cla-manager-request:
    type: object
    x-nullable: false
    title: Onboard CLA Manager Model
    description: Onboard CLA Manager Request Model
    properties:
      request_id:
        type: string
      lf_id:
        type: string
      project_name:
        type: string
      company_name:
        type: string
      user_full_name:
        type: string
      user_email:
        type: string
      date_created:
        type: string
      date_modified:
        type: string
    required:
      - lf_id
      - project_name
      - company_name
      - user_full_name
      - user_email

  onboard-notification-request:
    type: object
    x-nullable: false
    title: Onboard Notification Request Model
    description: Onboard Notification Request Model
    properties:
      sender_email:
        type: string
      recipient_emails:
        type: array
        description: A list of recipient email addresses
        items:
          type: string
      subject:
        type: string
      email_body:
        type: string
    required:
      - sender_email
      - recipient_emails
      - subject
      - email_body

  onboard-notification-response:
    type: object
    x-nullable: false
    title: Onboard Notification Response Model
    description: Onboard Notification Response Model
    properties:
      message:
        type: string
    required:
      - message

  gh-org-whitelist:
    type: object
    x-nullable: false
    title: Github Organization Whitelist
    description: Github Organiation Whitelist
    properties:
      organization_id:
        type: string
    required:
      - organization_id

  github-org:
    type: object
    x-nullable: false
    title: Github Organization
    description: Github Organiation object used for CCLA whitelist
    properties:
      id:
        type: string
      selected:
        type: boolean
        default: false
    required:
      - id

  company-invite-user:
    type: object
    x-nullable: false
    title: User
    description: User used for response from invitelist
    properties:
      userName:
        type: string
      inviteId:
        type: string
      userEmail:
        type: string
      userLFID:
        type: string
      status:
        type: string
      companyName:
        type: string

  access-list-user:
    type: object
    x-nullable: false
    title: User
    description: User used for request in company access list
    properties:
      inviteId:
        type: string
      userLFID:
        type: string

  projects:
    type: object
    x-nullable: false
    title: Projects
    description: A list of projects
    properties:
      lastKeyScanned:
        type: string
      pageSize:
        type: integer
      resultCount:
        type: integer
        format: int64
        x-omitempty: false
      projects:
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/project'

  project:
    type: object
    x-nullable: false
    title: Project
    description: Project data model
    properties:
      projectID:
        description: the project internal ID
        type: string
      projectExternalID:
        description: the project external ID
        type: string
      projectName:
        description: the project name
        type: string
      projectACL:
        type: array
        description: A list of user ID's authorized to make changes to the project
        items:
          type: string
      projectCCLAEnabled:
        description: Flag to indicate if the Corporate/Company Contributor License Agreement is enabled
        type: boolean
        x-omitempty: false
      projectICLAEnabled:
        description: Flag to indicate if the Individual Contributor License Agreement is enabled
        type: boolean
        x-omitempty: false
      projectCCLARequiresICLA:
        description: Flag to indicate if the CCLA configuration also requires an ICLA
        type: boolean
        x-omitempty: false
      projectCorporateDocuments:
        description: Project Corporate Documents
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/project-document'
      projectIndividualDocuments:
        description: Project Corporate Documents
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/project-document'
      projectMemberDocuments:
        description: Project Corporate Documents
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/project-document'
      dateCreated:
        description: Date/time the record was created
        type: string
      dateModified:
        description: Date/time the record was last modified
        type: string
      version:
        description: Record version
        type: string
      githubRepositories:
        description: Github repositories associated with project
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/github-repositories-group-by-orgs'
      gerrits:
        description: Gerrits associated with project
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/gerrit'

  project-document:
    type: object
    x-nullable: false
    title: Project Document
    description: Project Document
    properties:
      documentName:
        description: the document name
        example: "Apache Style"
        type: string
      documentFileID:
        description: the document file ID
        example: "fb4cc144-a76c-4c17-8a52-c648f158fded"
        type: string
      documentPreamble:
        description: the document preamble
        example: "Apache Style"
        type: string
      documentLegalEntityName:
        description: the document legal entity name
        example: "Apache Style"
        type: string
      documentAuthorName:
        description: the document author name
        example: "Apache Style"
        type: string
      documentContentType:
        description: the document content type
        example: 'storage+pdf'
        type: string
      documentS3URL:
        description: the document S3 URL
        example: "https://cla-signature-files-dev.s3.amazonaws.com/contract-group/f7222222-7777-4444-aaaa-1c1c1c1c1c1c/template/ccla.pdf"
        type: string
      documentMajorVersion:
        description: the document major version
        example: "2"
        type: string
      documentMinorVersion:
        description: the document minor version
        example: "0"
        type: string
      documentCreationDate:
        description: the document creation date
        example: '2019-08-01T06:55:09Z'
        type: string

  create-cla-group-template:
    title: CreateCLAGroupTemplate
    type: object
    x-nullable: false
    properties:
      TemplateID:
        type: string
      MetaFields:
        type: array
        items:
          $ref: '#/definitions/meta-field'

  template-pdfs:
    title: TemplatePDFs
    type: object
    x-nullable: false
    properties:
      individualPDFURL:
        type: string
      corporatePDFURL:
        type: string


  companies:
    type: object
    x-nullable: false
    title: Companies
    description: A list of companies
    properties:
      searchTerms:
        type: string
      resultCount:
        type: integer
        format: int64
        x-omitempty: false
      totalCount:
        type: integer
        format: int64
        x-omitempty: false
      lastKeyScanned:
        type: string
      companies:
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/company'

  companies-with-invites:
    type: object
    x-nullable: false
    title: Companies
    description: A list of companies with invitation status
    properties:
      resultCount:
        type: integer
        format: int64
        x-omitempty: false
      totalCount:
        type: integer
        format: int64
        x-omitempty: false
      lastKeyScanned:
        type: string
      companies-with-invites:
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/company-with-invite'

  company:
    type: object
    x-nullable: false
    title: Company
    description: Company Model
    properties:
      companyID:
        description: The company unique ID
        example: 13f79a8f-734d-44c1-ab03-ab98c2a1b64a
        type: string
      companyExternalID:
        description: the company external ID
        type: string
      companyName:
        description: The company name
        example: Acme, Inc.
        type: string
      companyACL:
        type: array
        description: A list of user ID's authorized to make changes to the company
        items:
          type: string
      created:
        type: string
        description: The company record created date/time
        format: date-time
      updated:
        type: string
        description: The company record update date/time
        format: date-time

  company-with-invite:
    type: object
    x-nullable: false
    title: Company
    description: Company Model with Invitation status
    properties:
      companyID:
        description: The company unique ID
        example: 13f79a8f-734d-44c1-ab03-ab98c2a1b64a
        type: string
      companyName:
        description: The company name
        example: Acme, Inc.
        type: string
      companyACL:
        type: array
        description: A list of user ID's authorized to make changes to the company
        items:
          type: string
      status:
        type: string
        description: The user's invitation status
      created:
        type: string
        description: The company record created date/time
        format: date-time
      updated:
        type: string
        description: The company record update date/time
        format: date-time


  signatures:
    type: object
    x-nullable: false
    title: Signatures
    description: Signatures
    properties:
      projectID:
        type: string
      resultCount:
        type: integer
        format: int64
        x-omitempty: false
      totalCount:
        type: integer
        format: int64
        x-omitempty: false
      lastKeyScanned:
        type: string
      signatures:
        type: array
        x-omitempty: false
        items:
          $ref: '#/definitions/signature'

  signature:
    type: object
    title: A signature model
    description: A signature - may be an ICLA or CCLA signature
    properties:
      signatureID:
        type: string
      signatureCreated:
        type: string
      signatureModified:
        type: string
      signatureSigned:
        type: boolean
      signatureApproved:
        type: boolean
      signatureReferenceType:
        type: string
      signatureReferenceID:
        type: string
      signatureReferenceName:
        type: string
      signatureReferenceNameLower:
        type: string
      signatureType:
        type: string
      signatureACL:
        type: array
        items:
          $ref: '#/definitions/user'
      userName:
        type: string
      companyName:
        type: string
      projectID:
        type: string
      userGHID:
        type: string
      userLFID:
        type: string
      version:
        type: string
      created:
        type: string
      modified:
        type: string
      emailWhitelist:
        type: array
        items:
          type: string
      domainWhitelist:
        type: array
        items:
          type: string
      githubWhitelist:
        type: array
        items:
          type: string
      githubOrgWhitelist:
        type: array
        items:
          type: string

  ccla-whitelist-request-input:
    type: object
    x-nullable: false
    title: Ccla whitelist request input
    description: Ccla whitelist request input
    properties:
      contributorId:
        type: string
      contributorName:
        type: string
      contributorEmail:
        type: string
      recipientName:
        type: string
      recipientEmail:
        type: string
      message:
        type: string

  ccla-whitelist-request-list:
    type: object
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/ccla-whitelist-request'


  ccla-whitelist-request:
    type: object
    x-nullable: false
    title: Ccla whitelist request
    description: Ccla whitelist request
    properties:
      requestId:
        type: string
      requestStatus:
        type: string
      companyId:
        type: string
      companyName:
        type: string
      projectId:
        type: string
      projectName:
        type: string
      dateCreated:
        type: string
      dateModified:
        type: string
      version:
        type: string
      userId:
        type: string
      userName:
        type: string
      userEmails:
        type: array
        items:
          type: string
      userGithubUsername:
        type: string
      userGithubId:
        type: string
      userExternalId:
        type: string

  template:
    type: object
    x-nullable: false
    title: CLA Template
    description: CLA Template
    properties:
      Name:
        type: string
      ID:
        type: string
      description:
        type: string
      iclaHtmlBody:
        type: string
      cclaHtmlBody:
        type: string
      metaFields:
        type: array
        items:
          $ref: '#/definitions/meta-field'
      iclaFields:
        type: array
        items:
          $ref: '#/definitions/field'
      cclaFields:
        type: array
        items:
          $ref: '#/definitions/field'

  meta-field:
    title: MetaField
    type: object
    properties:
      name:
        type: string
      value:
        type: string
      description:
        type: string
      templateVariable:
        type: string

  field:
    title: Field
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      anchorString:
        type: string
      fieldType:
        type: string
      isOptional:
        type: boolean
      isEditable:
        type: boolean
      width:
        type: integer
      height:
        type: integer
      offsetX:
        type: integer
      offsetY:
        type: integer

  error-response:
    type: object
    x-nullable: false
    title: Error Response
    description: Standard error format
    properties:
      Code:
        type: string
      Message:
        type: string

  delete-response:
    type: object
    x-nullable: true
    title: Delete Response
    description: Response Message
    properties:
      Code:
        type: string
      Message:
        type: string

  health:
    type: object
    title: Health
    properties:
      TimeStamp:
        type: string
      Status:
        type: string
      Version:
        type: string
      Githash:
        type: string
      Branch:
        type: string
      BuildTimeStamp:
        type: string
      Healths:
        type: array
        items:
          $ref: '#/definitions/health-status'

  health-status:
    type: object
    properties:
      Name:
        type: string
      Duration:
        type: string
      Healthy:
        type: boolean
      Error:
        type: string
      TimeStamp:
        type: string
    title: Health Status

  event-list:
    type: object
    properties:
      NextKey:
        type: string
      Events:
        type: array
        items:
          type: object
          $ref: '#/definitions/event'

  event:
    type: object
    properties:
      EventID:
        type: string
        description: unique id of the event
      EventType:
        type: string
        description: type of the event
      UserID:
        type: string
        description: id of the user who created this event
      UserName:
        type: string
        description: name of the user
      EventProjectID:
        type: string
        description: id of the SFID project
      EventProjectName:
        type: string
        description: name of the project
      EventCompanyName:
        type: string
        description: name of the company
      EventCompanyID:
        type: string
        description: id od the organization/company
      EventTime:
        type: string
        description: time of the event.
      EventTimeEpoch:
        type: integer
        description: time of the event in epoch.
      EventData:
        type: string
        description: data related to the event
      EventProjectExternalID:
        type: string
        description: sf id of the project
      ContainsPII:
        type: boolean
        description: contains personal identifiable information


  cla-manager-distribution:
    type: object
    properties:
      oneClaManager:
        type: integer
        x-omitempty: false
      twoClaManagers:
        type: integer
        x-omitempty: false
      threeClaManagers:
        type: integer
        x-omitempty: false
      fourOrMoreClaManagers:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: CLA manager distribution across companies

  total-count-metrics:
    type: object
    properties:
      corporateContributorsCount:
        type: integer
        x-omitempty: false
      individualContributorsCount:
        type: integer
        x-omitempty: false
      claManagersCount:
        type: integer
        x-omitempty: false
      contributorsCount:
        type: integer
        x-omitempty: false
      projectsCount:
        type: integer
        x-omitempty: false
      companiesCount:
        type: integer
        x-omitempty: false
      repositoriesCount:
        type: integer
        x-omitempty: false
      githubRepositoriesCount:
        type: integer
        x-omitempty: false
      gerritRepositoriesCount:
        type: integer
        x-omitempty: false
      companiesProjectContributionCount:
        type: integer
        x-omitempty: false
      lfMembersCLACount:
        type: integer
        x-omitempty: false
      nonLfMembersCLACount:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: CLA total metrics

  top-companies:
    type: object
    properties:
      topCompaniesByProjectCount:
        type: array
        items:
          $ref: '#/definitions/company-metric'
      topCompaniesByCorporateContributors:
        type: array
        items:
          $ref: '#/definitions/company-metric'
      topCompaniesByClaManagers:
        type: array
        items:
          $ref: '#/definitions/company-metric'
      averageCompanyProjectCount:
        type: integer
        x-omitempty: false
      averageCompanyCorporateContributors:
        type: integer
        x-omitempty: false
      averageCompanyClaManagers:
        type: integer
        x-omitempty: false

  top-projects:
    type: object
    properties:
      topProjectsByIcla:
        type: array
        items:
          $ref: '#/definitions/project-metric'
      topProjectsByCcla:
        type: array
        items:
          $ref: '#/definitions/project-metric'
      topProjectsByIclaAndCcla:
        type: array
        items:
          $ref: '#/definitions/project-metric'

  company-metric:
    type: object
    properties:
      id:
        type: string
      companyName:
        type: string
      claManagersCount:
        type: integer
        x-omitempty: false
      corporateContributorsCount:
        type: integer
        x-omitempty: false
      projectsCount:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: Company metrics

  list-project-metric:
    type: object
    properties:
      nextKey:
        type: string
      list:
        type: array
        items:
          $ref: '#/definitions/sf-project-metric'

  company-project-metrics:
    type: object
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/company-project-metric'

  company-project-metric:
    type: object
    properties:
      companyID:
        type: string
        x-omitempty: false
      projectID:
        type: string
        x-omitempty: false
      claManagersCount:
        type: integer
        x-omitempty: false
      contributorsCount:
        type: integer
        x-omitempty: false
      projectName:
        type: string
        x-omitempty: false
      companyName:
        type: string
        x-omitempty: false

  sf-project-metric:
    type: object
    properties:
      projectExternalId:
        type : string
      list:
        type: array
        items:
          $ref: '#/definitions/project-metric'


  project-metric:
    type: object
    properties:
      id:
        type: string
      externalProjectID:
        type: string
      projectName:
        type: string
      companiesCount:
        type: integer
        x-omitempty: false
      claManagersCount:
        type: integer
        x-omitempty: false
      corporateContributorsCount:
        type: integer
        x-omitempty: false
      individualContributorsCount:
        type: integer
        x-omitempty: false
      totalContributorsCount:
        type: integer
        x-omitempty: false
      repositoriesCount:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: project metrics

  github-repositories-group-by-orgs:
    type: object
    properties:
      organizationName:
        type: string
      list:
        type: array
        items:
          $ref: '#/definitions/github-repository'

  github-repository-input:
    type: object
    required:
      - repositoryExternalID
      - repositoryName
      - repositoryOrganizationName
      - repositoryProjectID
      - repositoryType
      - repositoryUrl
    properties:
      repositoryExternalID:
        type: string
      repositoryName:
        type: string
      repositoryOrganizationName:
        type: string
      repositoryProjectID:
        type: string
      repositoryType:
        type: string
      repositoryUrl:
        type: string

  github-repository:
    type: object
    properties:
      dateCreated:
        type: string
      dateModified:
        type: string
      repositoryExternalID:
        type: string
      repositoryID:
        type: string
      repositoryName:
        type: string
      repositoryOrganizationName:
        type: string
      repositoryProjectID:
        type: string
      repositorySfdcID:
        type: string
      repositoryType:
        type: string
      repositoryUrl:
        type: string
      version:
        type: string

  add-gerrit-input:
    type: object
    required:
      - gerritName
      - gerritUrl
    properties:
      gerritName:
        type: string
      gerritUrl:
        type: string
      groupIdCcla:
        type: string
      groupIdIcla:
        type: string

  gerrit:
    type: object
    properties:
      dateCreated:
        type: string
      dateModified:
        type: string
      gerritId:
        type: string
      gerritName:
        type: string
      gerritUrl:
        type: string
      groupIdCcla:
        type: string
      groupIdIcla:
        type: string
      groupNameCcla:
        type: string
      groupNameIcla:
        type: string
      projectId:
        type: string
      version:
        type: string

  github-organizations:
    type: object
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/github-organization'

  create-github-organization:
    type: object
    properties:
      organizationName:
        type: string
        example: "kubernetes"

  github-organization:
    type: object
    properties:
      dateCreated:
        type: string
        example: "2020-02-06T09:31:49.245630+0000"
      dateModified:
        type: string
        example: "2020-02-06T09:31:49.245646+0000"
      organizationInstallationID:
        type: integer
        example: 6635271
      organizationName:
        type: string
        example: "communitybridge"
      organizationSfid:
        type: string
        example: "a0941000002wBz4AAA"
      version:
        type: string
        example: "v1"
      githubInfo:
        type: object
        properties:
          error:
            type: string
            example: "unable to get github info of communitybridge"
          details:
            type: object
            properties:
              id:
                type: integer
                x-nullable: true
                example: 1476068
              bio:
                type: string
                x-nullable: true
              htmlUrl:
                type: string
                x-nullable: true
                example: "https://github.com/communitybridge"

      repositories:
        type: object
        properties:
          error:
            type: string
            example: "unable to get repositories for installation id : 6854001"
          list:
            type: array
            items:
              $ref: '#/definitions/github-repository-info'

  github-repository-info:
    type: object
    properties:
      repositoryGithubID:
        type: integer
        example: 250509778
      repositoryName:
        type: string
        example: "communitybridge/easycla"
      repositoryType:
        type: string
        example: "github"
      repositoryUrl:
        type: string
        example: "https://github.com/communitybridge/easycla"

  list-github-repositories:
    type: object
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/github-repository'

responses:
  resource-deleted:
    description: Resource Deleted
    schema:
      $ref: '#/definitions/delete-response'
  unauthorized:
    description: Unauthorized
    schema:
      $ref: '#/definitions/error-response'
  invalid-request:
    description: Invalid request
    schema:
      $ref: '#/definitions/error-response'
  forbidden:
    description: Insufficient privilege to execute action.
    schema:
      $ref: '#/definitions/error-response'
  not-found:
    description: Not found
    schema:
      $ref: '#/definitions/error-response'
  conflict:
    description: The request could not be completed due to a conflict with the current state of the target resource.
    schema:
      $ref: '#/definitions/error-response'
