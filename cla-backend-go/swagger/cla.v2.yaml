# Copyright The Linux Foundation and each contributor to CommunityBridge.
# SPDX-License-Identifier: MIT
swagger: '2.0'
info:
  title: EasyCLA v2 API
  version: '2.0'
basePath: /v4
securityDefinitions:
  lf-auth:
    type: apiKey
    name: X-ACL
    in: header
    description: Requires X-ACL headers and bearer token
security:
  - lf-auth: []

schemes:
  - http
consumes:
  - application/json
produces:
  - application/json

paths:
  /ops/version:
    get:
      summary: API Version Information
      security: []
      operationId: getVersion
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/version'
      tags:
        - version

  /ops/health:
    get:
      summary: API Health Check
      security: []
      operationId: healthCheck
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/health'
        '503':
          description: ''
          schema:
            $ref: '#/definitions/health'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - health

  /api-docs:
    get:
      security: []
      summary: API documentation
      operationId: getDoc
      produces:
        - text/html
      responses:
        200:
          description: Success
      tags:
        - docs

  /swagger.json:
    get:
      security: []
      summary: Swagger API as JSON
      operationId: getSwagger
      produces:
        - application/json
      responses:
        200:
          description: Success
      tags:
        - docs

  /metrics/cla-manager-distribution:
    get:
      summary: Get CLA manager distribution for EasyCLA
      description: Returns CLA manager distribution
      operationId: getClaManagerDistribution
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/cla-manager-distribution'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - metrics

  /metrics/total-count:
    get:
      summary: Get total count metrics
      description: Returns total count metrics
      operationId: getTotalCount
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/total-count-metrics'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - metrics

  /metrics/company/{companyID}:
    get:
      summary: Get metrics of company
      description: Returns company metrics
      operationId: getCompanyMetric
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: companyID
          description: the company ID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company-metric'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - metrics

  /metrics/top-companies:
    get:
      summary: company metrics of top companies
      description: Returns list company metrics of top companies
      operationId: getTopCompanies
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/top-companies'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - metrics

  /metrics/top-projects:
    get:
      summary: project metrics of top projects
      description: Returns list project metrics of top projects
      operationId: getTopProjects
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/top-projects'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - metrics

  /metrics/project/{projectID}:
    get:
      summary: Get metrics of project
      description: Returns project metrics
      operationId: getProjectMetric
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectID
          description: the project ID
          in: path
          type: string
          required: true
        - name: idType
          description: ID type
          in: query
          type: string
          enum:
            - salesforce
            - internal
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/sf-project-metric'
        '400':
          $ref: '#/responses/invalid-request'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - metrics

  /metrics/project:
    get:
      summary: list metrics of project
      description: Returns list of project metrics
      operationId: listProjectMetrics
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/list-project-metric'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - metrics

  /metrics/company/{companySFID}/project-metrics:
    get:
      summary: list project metrics of company
      description: Returns list of project metrics for company
      operationId: listCompanyProjectMetrics
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-companySFID"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company-project-metrics'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - metrics

  # Cla group Service
  /cla-group:
    post:
      summary: Create an EasyCLA CLA Group
      description: Creates a new CLA Group within the EasyCLA system.
      operationId: createClaGroup
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: claGroupInput
          in: body
          schema:
            $ref: '#/definitions/create-cla-group-input'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/cla-group'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - cla-group

  /cla-group/validate:
    post:
      summary: Validates the CLA Group
      description: Validates the CLA Group provided input parameters
      operationId: validateClaGroup
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: validationInputRequest
          in: body
          schema:
            $ref: '#/definitions/cla-group-validation-request'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/cla-group-validation-response'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - cla-group

  /project:
    put:
      summary: Update Project by ID
      operationId: updateProject
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: body
          in: body
          schema:
            $ref: '#/definitions/project'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project
    get:
      summary: Get Projects
      operationId: getProjects
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/searchTerm'
        - $ref: '#/parameters/searchField'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/fullMatch'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/projects'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project

  /project/{projectSfdcId}:
    parameters:
      - name: projectSfdcId
        in: path
        type: string
        required: true
    get:
      summary: Get Project by ID
      operationId: getProjectById
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project
    delete:
      summary: Delete Project by ID
      operationId: deleteProjectById
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '204':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - project

  /project/summary:
    # API to support the Member Portal Dashboard Summary View
    # See: https://confluence.linuxfoundation.org/pages/viewpage.action?pageId=49907240
    get:
      summary: Get Projet Summary
      description: Returns a list of Foundations and their child projects where CLAs are enabled
      operationId: getProjectSummary
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project-summary'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project

  /project/enabled/{projectSfdcId}:
    get:
      summary: Get CLA enabled projects
      description: Returns a list of CLA enabled projects for a given foundation
      operationId: getCLAProjectsByID
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSfdcId
          in: path
          type: string
          required: true
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/enabled-cla-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project

  /project/external/{externalID}:
    get:
      summary: Get CLA Groups By SFDC ID
      description: Returns a list of CLA groups associated with the specified SFID ID
      operationId: getProjectsByExternalID
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: externalID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/pageSize'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/projects'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project

  /project/name/{projectName}:
    get:
      summary: Get Project By Name
      description: Returns the project object when provided the project name - exact match
      operationId: getProjectByName
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectName
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/project'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - project

  /events/recent:
    get:
      summary: List recent events - requires Admin-level access
      description: Returns list of recent events
      operationId: getRecentEvents
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/pageSize'
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/event-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - events

  /events/foundation/{foundationSFID}/csv:
    get:
      summary: Download all the events for the foundation as a CSV document
      description: Download all the events for the foundation as a CSV document
      operationId: getFoundationEventsAsCSV
      parameters:
        - $ref: "#/parameters/path-foundationSFID"
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/pageSize'
      produces:
        - text/csv
      responses:
        '200':
          description: The events for the SFDC foundation as a CSV document
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - events

  /events/project/{projectSFID}/csv:
    get:
      summary: Download all the events for the project as a CSV document
      description: Download all the events for the project as a CSV document
      operationId: getProjectEventsAsCSV
      parameters:
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/pageSize'
      produces:
        - text/csv
      responses:
        '200':
          description: The events for the SFDC project as a CSV document
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - events

  /company/{companySFID}/project/{projectSFID}/events:
    get:
      summary: return recent events of company and project
      description: Returns list of events of company and project
      operationId: getRecentCompanyProjectEvents
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/path-projectSFID'
        - $ref: '#/parameters/path-companySFID'
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/event-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - events

  /template:
    get:
      summary: Get Available Templates
      operationId: getTemplates
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/template'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - template

  /clagroup/{claGroupID}/template:
    post:
      summary: Create contract template for CLA Group
      operationId: createCLAGroupTemplate
      parameters:
        - $ref: "#/parameters/path-claGroupID"
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - in: body
          name: body
          schema:
            $ref: '#/definitions/create-cla-group-template'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/template-pdfs'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - template

  /template/preview:
    post:
      summary: Create contract template for CLA Group
      operationId: templatePreview
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - in: query
          type: string
          name: template_for
          required: true
          enum:
            - icla
            - ccla
        - in: body
          name: templatePreviewInput
          schema:
            $ref: '#/definitions/create-cla-group-template'
          required: true
      produces:
        - application/pdf
      responses:
        '200':
          description: A PDF file
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - template

  /project/{projectSFID}/github/organizations:
    post:
      summary: API to add new gitHub oranization in the project
      operationId: addProjectGithubOrganization
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSFID
          in: path
          type: string
          required: true
        - in: body
          name: body
          schema:
            $ref: '#/definitions/create-github-organization'
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/github-organization'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        500:
          $ref: '#/responses/internal-server-error'
      tags:
        - github-organizations
    get:
      summary: API to fetch the gitHub oranizations of the project
      operationId: getProjectGithubOrganizations
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSFID
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/github-organizations'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        500:
          $ref: '#/responses/internal-server-error'
      tags:
        - github-organizations

  /project/{projectSFID}/github/organizations/{orgName}:
    delete:
      summary: API to delete gitHub oranization in the project
      operationId: deleteProjectGithubOrganization
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSFID
          in: path
          type: string
          required: true
        - name: orgName
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
      tags:
        - github-organizations
  /project/{projectSFID}/github/repositories:
    post:
      summary: API to add the gitHub repository
      operationId: addProjectGithubRepository
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSFID
          in: path
          type: string
          required: true
        - in: body
          name: github-repository-input
          schema:
            $ref: '#/definitions/github-repository-input'
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/github-repository'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        500:
          $ref: '#/responses/internal-server-error'
      tags:
        - github-repositories
    get:
      summary: API to fetch the gitHub repositories of the project
      operationId: getProjectGithubRepositories
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSFID
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/list-github-repositories'
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        500:
          $ref: '#/responses/internal-server-error'
      tags:
        - github-repositories
  /project/{projectSFID}/github/repositories/{repositoryID}:
    delete:
      summary: API to add the gitHub repository
      operationId: deleteProjectGithubRepository
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectSFID
          in: path
          type: string
          required: true
        - name: repositoryID
          in: path
          type: string
          required: true
      responses:
        200:
          description: Success
        400:
          $ref: '#/responses/invalid-request'
        401:
          $ref: '#/responses/unauthorized'
        403:
          $ref: '#/responses/forbidden'
        404:
          $ref: '#/responses/not-found'
      tags:
        - github-repositories

  /signatures/id/{signatureID}:
    get:
      summary: Get the signature by ID
      description: Returns the signature when provided the signature ID
      operationId: getSignature
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: signatureID
          description: the signature ID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signature'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures


  /signatures/project/{projectID}:
    get:
      summary: Get project signatures
      description: Returns a list of project signature models when provided the project ID
      operationId: getProjectSignatures
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-projectID"
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/searchTerm'
        - $ref: '#/parameters/searchField'
        - $ref: '#/parameters/fullMatch'
        - $ref: '#/parameters/signatureType'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  # --------------------------------------------------------
  # Individual CLA Endpoints - PDF, CSV, Zip Download
  # --------------------------------------------------------
  /signatures/project/{claGroupID}/icla/pdfs:
    get:
      summary: Downloads all ICLAs for this project
      description: Downloads the ICLAs for this project
      operationId: downloadProjectSignatureICLAs
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
      produces:
        - application/zip
      responses:
        '200':
          description: The CLA Group ICLAs as a zip file
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{claGroupID}/icla/csv:
    get:
      summary: Downloads all ICLA information as a CSV document for this project
      description: Downloads the ICLA information as a CSV document for this project
      operationId: downloadProjectSignatureICLAAsCSV
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
      produces:
        - text/csv
      responses:
        '200':
          description: The CLA Group ICLAs as a CSV file
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{claGroupID}/icla/{signatureID}/pdf:
    get:
      summary: Downloads the user's ICLA for this project
      description: Downloads the user's ICLA for this project
      operationId: downloadProjectSignatureICLA
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
        - $ref: "#/parameters/path-signatureID"
      produces:
        - application/pdf
      responses:
        '200':
          description: The user's ICLA as a PDF document
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  # --------------------------------------------------------
  # Corporate CLA Endpoints - PDF, CSV, Zip Download
  # --------------------------------------------------------
  /signatures/project/{claGroupID}/ccla/pdfs:
    get:
      summary: Downloads all corporate CLAs for this project
      description: Downloads the corporate CLAs for this project
      operationId: downloadProjectSignatureCCLAs
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
      produces:
        - application/zip
      responses:
        '200':
          description: The CLA Group coporate CLAs as a zip file
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{claGroupID}/ccla/csv:
    get:
      summary: Downloads all coporate CLA information as a CSV document for this project
      description: Downloads the corporate CLA information as a CSV document for this project
      operationId: downloadProjectSignatureCCLAAsCSV
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
      produces:
        - text/csv
      responses:
        '200':
          description: The CLA Group corporate CLAs as a CSV file
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{claGroupID}/ccla/{signatureID}/pdf:
    get:
      summary: Downloads the corporate CLA for this project
      description: Downloads the corporate CLA for this project
      operationId: downloadProjectSignatureCorporateCLA
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
        - $ref: "#/parameters/path-signatureID"
      produces:
        - application/pdf
      responses:
        '200':
          description: The corporate CLA as a PDF document
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  # --------------------------------------------------------
  # Employee CLA Endpoints - CSV Report Download
  # --------------------------------------------------------
  /signatures/project/{claGroupID}/employee/csv:
    get:
      summary: Downloads all employee CLA information as a CSV document for this project
      description: Downloads the employee CLA information as a CSV document for this project
      operationId: downloadProjectSignatureEmployeeAsCSV
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-claGroupID"
      produces:
        - text/csv
      responses:
        '200':
          description: The CLA Group employee CLA's as a CSV file
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{projectSFID}/company/{companySFID}:
    get:
      summary: Get project company ccla signatures
      description: Returns a list of ccla signature models when provided the project ID and company ID
      operationId: getProjectCompanySignatures
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/path-companySFID"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/company/{companyID}:
    get:
      summary: Get company signatures
      description: Returns a list of company signatures when provided the company ID
      operationId: getCompanySignatures
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: '#/parameters/signatureType'
        - name: companyID
          description: the company ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/companyName'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/user/{userID}:
    get:
      summary: Get user signatures
      description: Returns a list of user signatures when provided the user ID
      operationId: getUserSignatures
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: userID
          description: the user ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
        - $ref: '#/parameters/userName'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{projectID}/company/{companyID}/employee:
    get:
      summary: Get project company signatures for the employees
      description: Returns a list of employee project signature models when provided the project ID and company ID
      operationId: getProjectCompanyEmployeeSignatures
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectID
          description: the project ID
          in: path
          type: string
          required: true
        - name: companyID
          description: the company ID
          in: path
          type: string
          required: true
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/nextKey'
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signatures'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /signatures/project/{projectSFID}/company/{companySFID}/clagroup/{claGroupID}/approval-list:
    put:
      summary: Updates the Project / Organization/Company Approval list
      description: API to update the project and organization/company approval list.
      operationId: updateApprovalList
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/path-companySFID"
        - name: claGroupID
          in: path
          type: string
          required: true
        - name: body
          in: body
          schema:
            $ref: '#/definitions/approval-list'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/signature'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures
  
  /user/{userID}/invite-company-admin:
    post:
      summary: Invite Manager 
      security: []
      description: Invite Company Admin based on user request to sign CLA 
      operationId: inviteCompanyAdmin
      parameters:
        - $ref: "#/parameters/path-userID"
        - name: body
          in: body
          schema:
            type: object
            x-nullable: false
            title: CLA Manager Designee
            properties:
              contactAdmin:
                description: flag checking whether to contact company admin
                type: boolean 
              companySFID:
                description: CompanySFID of contributor inviting CLA Manager
                type: string
              projectSFID:
                description: project SFID to be signed
                type: string
              userEmail:
                description: Proposed CLA Manager email
                type: string
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: "#/definitions/cla-manager-designee"
        '204':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - cla-manager

  /company/{companySFID}/project/{projectSFID}/cla-manager/requests:
    post:
      summary: Adds a CLA Manager Designee to the specified Company and Project
      description: User proposes a CLA Manager making the proposed user CLA Manager Designee
      operationId: createCLAManagerRequest
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-companySFID"
        - $ref: "#/parameters/path-projectSFID"
        - name: body
          in: body
          schema:
            type: object
            x-nullable: false
            title: CLA Manager Designee User
            description: User object used for CLA Manager requests
            properties:
              userEmail:
                type: string
              contactAdmin:
                type: boolean
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: "#/definitions/cla-manager-designee"
        '204':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - cla-manager
            

  /company/{companySFID}/project/{projectSFID}/cla-manager:
    post:
      summary: Adds a new CLA Manager to the specified Company and Project
      description: Allows an existing CLA Manager to add another CLA Manager to the specified Company and Project.
      operationId: createCLAManager
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/path-companySFID"
        - name: body
          in: body
          schema:
            $ref: '#/definitions/cla-manager-user'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company-cla-manager'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - cla-manager

  /company/{companySFID}/project/{projectSFID}/cla-manager/{userLFID}:
    delete:
      summary: Removes the CLA Manager from ACL for specified Company and Project
      description: Allows an existing CLA Manager to remove another CLA Manager from the specified Company and Project.
      operationId: deleteCLAManager
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/path-companySFID"
        - $ref: "#/parameters/path-userLFID"

      responses:
        '204':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - cla-manager
  
  /company/{companySFID}/project/{projectSFID}/cla-manager-designee:
    post:
      summary: Assigns CLA Manager designee
      description: Assigns CLA Manager designee to a given user
      operationId: createCLAManagerDesignee
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/path-companySFID"
        - name: body
          in: body
          schema:
            type: object
            x-nullable: false
            title: CLA Manager designee
            description: User object used for CLA Manager designee
            properties:
              userEmail:
                type: string
        
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/cla-manager-designee'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - cla-manager


  /signatures/{signatureID}/gh-org-whitelist:
    get:
      summary: Signature Update
      operationId: getGitHubOrgWhitelist
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: signatureID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/github-org'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures
    delete:
      summary: Signature Update
      operationId: deleteGitHubOrgWhitelist
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: signatureID
          in: path
          type: string
          required: true
        - name: body
          in: body
          schema:
            $ref: '#/definitions/gh-org-whitelist'
      responses:
        '204':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/github-org'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures
    post:
      summary: Signature Update
      operationId: addGitHubOrgWhitelist
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: signatureID
          in: path
          type: string
          required: true
        - name: body
          in: body
          schema:
            $ref: '#/definitions/gh-org-whitelist'
      responses:
        '200':
          description: 'Success'
          schema:
            type: array
            items:
              $ref: '#/definitions/github-org'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - signatures

  /project/{projectID}/gerrits/{gerritID}:
    delete:
      summary: delete the gerrit
      description: Delete the gerrit
      operationId: deleteGerrit
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectID
          in: path
          type: string
          required: true
        - name: gerritID
          in: path
          type: string
          required: true
      responses:
        '200':
          description: 'Success'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
      tags:
        - gerrits

  /project/{projectID}/gerrits:
    post:
      summary: add the gerrit
      description: add the gerrit
      operationId: addGerrit
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: projectID
          in: path
          type: string
          required: true
        - in: body
          name: add-gerrit-input
          schema:
            $ref: '#/definitions/add-gerrit-input'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/gerrit'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '500':
          $ref: '#/responses/internal-server-error'
      tags:
        - gerrits

  /company/{companySFID}/project/{projectSFID}/cla-managers:
    get:
      summary: get cla manager of company for particular project/foundation
      description: Returns list cla managers of the company for project/foundation
      operationId: getCompanyProjectClaManagers
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-companySFID"
        - $ref: "#/parameters/path-projectSFID"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company-cla-managers'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company
  /company/{companySFID}/project/{projectSFID}/active-cla-list:
    get:
      summary: get active cla list of company for particular project/foundation
      description: Returns list active cla of the company under particular project/foundation
      operationId: getCompanyProjectActiveCla
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-companySFID"
        - $ref: "#/parameters/path-projectSFID"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/active-cla-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company
  /company/{companySFID}/project/{projectSFID}/contributors:
    get:
      summary: get corporate contributors for project
      description: Returns list of corporate contributors for project
      operationId: getCompanyProjectContributors
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-companySFID"
        - $ref: "#/parameters/path-projectSFID"
        - $ref: "#/parameters/searchTerm"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/corporate-contributor-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company
  /company/{companySFID}/project/{projectSFID}/cla:
    get:
      summary: api returns company cla for all the cla_groups present in that project
      operationId: getCompanyProjectCla
      parameters:
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - $ref: "#/parameters/path-companySFID"
        - $ref: "#/parameters/path-projectSFID"
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/company-project-cla-list'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - company
  
  /user/{userID}/company:
    post:
      summary: api that creates salesforce company
      security: []
      description: Creates a Company for an individual contributor that fails to get a company during the signing getProjectSignatures
      operationId: createCompany
      parameters:
        - $ref: "#/parameters/path-userID"
        - name: input
          in: body
          schema:
            $ref: '#/definitions/company-input'
          required: true
      responses:
        '200':
          description: 'Success'
          schema: 
            $ref: '#/definitions/company-output'
        '400':
          $ref: '#/responses/invalid-request'
        '409':
          $ref: '#/responses/conflict'
      tags:
        - company

  /request-corporate-signature:
    post:
      summary: api generates the corporate signature which is ready to sign
      description: Creates a new signature given project and company IDs. The manager will be redirected to the
        return_url once signature is complete.
      operationId: requestCorporateSignature
      parameters:
        - $ref: "#/parameters/authorization"
        - $ref: "#/parameters/x-request-id"
        - $ref: "#/parameters/x-acl"
        - $ref: "#/parameters/x-username"
        - $ref: "#/parameters/x-email"
        - name: input
          in: body
          schema:
            $ref: '#/definitions/corporate-signature-input'
          required: true
      responses:
        '200':
          description: 'Success'
          schema:
            $ref: '#/definitions/corporate-signature-output'
        '400':
          $ref: '#/responses/invalid-request'
        '401':
          $ref: '#/responses/unauthorized'
        '403':
          $ref: '#/responses/forbidden'
        '404':
          $ref: '#/responses/not-found'
      tags:
        - sign

responses:
  unauthorized:
    description: Unauthorized
    schema:
      $ref: '#/definitions/error-response'
  invalid-request:
    description: Invalid request
    schema:
      $ref: '#/definitions/error-response'
  forbidden:
    description: Insufficient privilege to execute action
    schema:
      $ref: '#/definitions/error-response'
  not-found:
    description: Not found
    schema:
      $ref: '#/definitions/error-response'
  internal-server-error:
    description: Internal server error
    schema:
      $ref: '#/definitions/error-response'
  conflict:
    description: Duplicate Resource
    schema:
      $ref: '#/definitions/error-response'

# Common parameters
parameters:
  pageSize:
    name: pageSize
    description: The maximum number of results per page, value must be a positive integer value
    in: query
    type: integer
    required: false
    minimum: 0
    exclusiveMinimum: true
  searchField:
    name: searchField
    description: The optional user name filter
    in: query
    type: string
    required: false
    pattern: '^\w+$'
  searchTerm:
    name: searchTerm
    description: The optional search filter
    in: query
    type: string
    required: false
  fullMatch:
    name: fullMatch
    in: query
    type: boolean
    default: false
    required: false
  nextKey:
    name: nextKey
    description: The next key to scan - used as a page offset for scanning batches of records
    in: query
    type: string
    required: false
    # UUID v4 regex
    # pattern: '[a-f0-9]{8}-?[a-f0-9]{4}-?4[a-f0-9]{3}-?[89ab][a-f0-9]{3}-?[a-f0-9]{12}'
  companyName:
    name: companyName
    description: The optional company name filter
    in: query
    type: string
    required: false
    pattern: '^\w+$'
  userName:
    name: userName
    description: The optional user name filter
    in: query
    type: string
    required: false
    pattern: '^\w+$'
  signatureType:
    name: signatureType
    in: query
    type: string
    required: false
    enum: [ccla,cla]
  path-claGroupID:
    name: claGroupID
    description: ID of the CLA Group
    in: path
    type: string
    required: true
  path-foundationSFID:
    name: foundationSFID
    description: the Salesforce ID of the Foundation
    in: path
    type: string
    required: true
  path-projectSFID:
    name: projectSFID
    description: the Salesforce ID of the project
    in: path
    type: string
    required: true
  path-projectID:
    name: projectID
    description: id of the CLA Group
    in: path
    type: string
    required: true
  path-userID:
    name: userID
    description: v1 EasyCLA user Admin ID
    in: path
    type: string
    required: true
  path-userLFID:
    name: userLFID
    description: LFID of the user
    in: path
    type: string
    required: true
  path-companyID:
    name: companyID
    description: id of the company
    in: path
    type: string
    required: true
  path-companySFID:
    name: companySFID
    description: salesforce id of the company
    in: path
    type: string
    required: true
  path-signatureID:
    name: signatureID
    description: id of the CLA signature
    in: path
    type: string
    required: true
  x-acl:
    name: X-ACL
    description: The access control list header value encoded as base64 - assigned by the API Gateway based on user/request permissions
    in: header
    type: string
    required: true
    x-example: JImlzQWRtaW4iOiB0cnVlLAoJImFsbG93ZWQiOiB0cnVlLAoJImNvbnRleHQiOic3lzdGVtIgp9Cg==
  authorization:
    name: Authorization
    description: Bearer token
    in: header
    type: string
    required: true
  x-username:
    name: X-USERNAME
    description: The username/LFID value - assigned/set by the API Gateway based on login credentials
    in: header
    type: string
    x-example: zachking123
  x-email:
    name: X-EMAIL
    description: The email value - assigned/set by the API Gateway based on login credentials
    in: header
    type: string
    x-example: zachking@mail.com
  x-request-id:
    name: X-REQUEST-ID
    description: The unique request ID value - assigned/set by the API Gateway based on the login session
    in: header
    type: string

definitions:
  version:
    $ref: './common/version.yaml'

  health:
    $ref: './common/health.yaml'

  health-status:
    $ref: './common/health-status.yaml'

  event-list:
    $ref: './common/event-list.yaml'

  event:
    $ref: './common/event.yaml'

  github-repository-input:
    $ref: './common/github-repository-input.yaml'

  github-repository:
    $ref: './common/github-repository.yaml'

  list-github-repositories:
    $ref: './common/list-github-repositories.yaml'

  projects:
    $ref: './common/projects.yaml'

  project:
    $ref: './common/project.yaml'

  project-summary:
    $ref: './common/project-summary.yaml'

  template:
    $ref: './common/template.yaml'

  create-cla-group-template:
    $ref: './common/create-cla-group-template.yaml'

  template-pdfs:
    $ref: './common/template-pdfs.yaml'

  github-organizations:
    $ref: './common/github-organizations.yaml'

  github-organization:
    $ref: './common/github-organization.yaml'

  create-github-organization:
    $ref: './common/create-github-organization.yaml'

  user:
    $ref: './common/user.yaml'

  signatures:
    $ref: './common/signatures.yaml'

  signature:
    $ref: './common/signature.yaml'

  approval-list:
    $ref: './common/signature-approval-list.yaml'

  github-org:
    $ref: './common/github-org.yaml'

  gh-org-whitelist:
    $ref: './common/gh-org-whitelist.yaml'

  add-gerrit-input:
    $ref: './common/add-gerrit-input.yaml'

  gerrit:
    $ref: './common/gerrit.yaml'

  github-repositories-group-by-orgs:
    $ref: './common/github-repositories-group-by-orgs.yaml'

  project-document:
    $ref: './common/project-document.yaml'

  meta-field:
    $ref: './common/meta-field.yaml'

  field:
    $ref: './common/field.yaml'

  github-repository-info:
    $ref: './common/github-repository-info.yaml'

  company:
    $ref: './common/company.yaml'

  total-count-metrics:
    type: object
    properties:
      corporateContributorsCount:
        type: integer
        x-omitempty: false
      individualContributorsCount:
        type: integer
        x-omitempty: false
      claManagersCount:
        type: integer
        x-omitempty: false
      contributorsCount:
        type: integer
        x-omitempty: false
      projectsCount:
        type: integer
        x-omitempty: false
      companiesCount:
        type: integer
        x-omitempty: false
      repositoriesCount:
        type: integer
        x-omitempty: false
      githubRepositoriesCount:
        type: integer
        x-omitempty: false
      gerritRepositoriesCount:
        type: integer
        x-omitempty: false
      companiesProjectContributionCount:
        type: integer
        x-omitempty: false
      lfMembersCLACount:
        type: integer
        x-omitempty: false
      nonLfMembersCLACount:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: CLA total metrics

  top-companies:
    type: object
    properties:
      topCompaniesByProjectCount:
        type: array
        items:
          $ref: '#/definitions/company-metric'
      topCompaniesByCorporateContributors:
        type: array
        items:
          $ref: '#/definitions/company-metric'
      topCompaniesByClaManagers:
        type: array
        items:
          $ref: '#/definitions/company-metric'
      averageCompanyProjectCount:
        type: integer
        x-omitempty: false
      averageCompanyCorporateContributors:
        type: integer
        x-omitempty: false
      averageCompanyClaManagers:
        type: integer
        x-omitempty: false

  top-projects:
    type: object
    properties:
      topProjectsByIcla:
        type: array
        items:
          $ref: '#/definitions/project-metric'
      topProjectsByCcla:
        type: array
        items:
          $ref: '#/definitions/project-metric'
      topProjectsByIclaAndCcla:
        type: array
        items:
          $ref: '#/definitions/project-metric'

  company-metric:
    type: object
    properties:
      id:
        type: string
      companyName:
        type: string
      claManagersCount:
        type: integer
        x-omitempty: false
      corporateContributorsCount:
        type: integer
        x-omitempty: false
      projectsCount:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: Company metrics
  
  company-input:
    type: object
    required:
      - companyName
      - companyWebsite
    properties:
      companyName:
        type: string
      companyWebsite:
        type: string

  company-output:
    type: object
    properties:
      companyName:
        type: string
      companyWebsite:
        type: string
      logoURL:
        type: string
  
  cla-manager-distribution:
    type: object
    properties:
      oneClaManager:
        type: integer
        x-omitempty: false
      twoClaManagers:
        type: integer
        x-omitempty: false
      threeClaManagers:
        type: integer
        x-omitempty: false
      fourOrMoreClaManagers:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: CLA manager distribution across companies

  list-project-metric:
    type: object
    properties:
      nextKey:
        type: string
      list:
        type: array
        items:
          $ref: '#/definitions/sf-project-metric'

  company-project-metrics:
    type: object
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/company-project-metric'

  company-project-metric:
    type: object
    properties:
      companyID:
        type: string
        x-omitempty: false
      projectID:
        type: string
        x-omitempty: false
      claManagersCount:
        type: integer
        x-omitempty: false
      contributorsCount:
        type: integer
        x-omitempty: false
      projectName:
        type: string
        x-omitempty: false
      companyName:
        type: string
        x-omitempty: false
      projectSFID:
        type: string
        x-omitempty: false

  sf-project-metric:
    type: object
    properties:
      projectExternalId:
        type: string
      list:
        type: array
        items:
          $ref: '#/definitions/project-metric'

  project-metric:
    type: object
    properties:
      id:
        type: string
      externalProjectID:
        type: string
      projectName:
        type: string
      companiesCount:
        type: integer
        x-omitempty: false
      claManagersCount:
        type: integer
        x-omitempty: false
      corporateContributorsCount:
        type: integer
        x-omitempty: false
      individualContributorsCount:
        type: integer
        x-omitempty: false
      totalContributorsCount:
        type: integer
        x-omitempty: false
      repositoriesCount:
        type: integer
        x-omitempty: false
      createdAt:
        type: string
    title: project metrics

  company-cla-managers:
    type: object
    title: Company CLA Managers
    description: List of CLA Managers for the company
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/company-cla-manager'

  cla-manager-designee:
    type: object
    title: Company CLA Designee
    description: CLA Manager Designee details
    properties:
      lf_username:
        type: string
        x-omitempty: false
        example: "john.doe"
      user_sfid:
        type: string
        x-omitempty: false
      email:
        type: string
        x-omitempty: false
      type:
        type: string
        x-omitempty: false
        example: "contact"
      assigned_on:
        type: string
        x-omitempty: false
      company_sfid:
        type: string
        x-omitempty: false
        example: ""
      project_sfid:
        type: string
        x-omitempty: false
        example: "a2g17000000hyxNAAA"
      project_name:
        type: string
        description: "name of the salesforce project"
        example: "Appium"
        x-omitempty: false

  company-cla-manager:
    type: object
    title: Company CLA Manager
    description: CLA Managers details
    properties:
      lf_username:
        type: string
        x-omitempty: false
        example: "john.doe"
      name:
        type: string
        x-omitempty: false
        example: "John Doe"
      user_sfid:
        type: string
        x-omitempty: false
      email:
        type: string
        x-omitempty: false
        example: "john.doe@company.com"
      approved_on:
        type: string
        x-omitempty: false
      project_id:
        type: string
        x-omitempty: false
        example: "e1e30240-a722-4c82-a648-121681d959c7"
      project_sfid:
        type: string
        x-omitempty: false
        example: "a2g17000000hyxNAAA"
      project_name:
        type: string
        description: "name of the salesforce project"
        example: "Appium"
        x-omitempty: false
      cla_group_name:
        type: string
        description: "name of the cla group"
        x-omitempty: false
      organization_name:
        type: string
        description: "name of salesforce organization"
        x-omitempty: false
        example: "Intel Corporation"
      organization_sfid:
        type: string
        x-omitempty: false
        example: "00117000015vpjXAAQ"

  cla-manager-user:
    type: object
    required:
      - firstName
      - lastName
      - userEmail
    x-nullable: false
    title: CLA Manager User
    description: User object used for CLA Manager requests
    properties:
      firstName:
        type: string
      lastName:
        type: string
      userEmail:
        type: string

  enabled-cla-list:
    type: object
    title: Enabled CLA list
    description: List of CLA enabled projects for specified Foundation
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/enabled-cla'

  enabled-cla:
    type: object
    title: Enabled CLA
    description: Enabled CLA detail
    properties:
      project_name:
        type: string
        example: "Appium"
        x-omitempty: false
      project_sfid:
        type: string
        example: "a2g17000000hyxNABB"
        x-omitempty: false
      project_type:
        type: string
        example: "Project"
        x-omitempty: false
      project_logo:
        type: string
        example: "http://wwwlinuxfoundation.org/logo.gif"
        x-omitempty: false

  active-cla-list:
    type: object
    title: Active cla list of the companies
    description: details of the companies active cla
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/active-cla'

  company-project-cla-list:
    type: object
    properties:
      signed_cla_list:
        type: array
        items:
          $ref: '#/definitions/active-cla'
      unsigned_project_list:
        type: array
        items:
          $ref: '#/definitions/unsigned_project'

  unsigned_project:
    type: object
    title: unsigned project
    description: details of unsigned project
    properties:
      cla_group_id:
        type: string
        x-omitempty: false
        example: "e1e30240-a722-4c82-a648-121681d959c7"
      cla_group_name:
        type: string
        x-omitempty: false
        example: "gRPC"
      project_sfid:
        type: string
        x-omitempty: false
        example: "a2g17000000hyxNAAA"
      project_name:
        type: string
        x-omitempty: false
        example: "Appium"
      can_sign:
        type: boolean
        x-omitempty: false
        description: if requesting user is cla-designee then this would be true

  active-cla:
    type: object
    title: Active cla of the company
    description: details of active cla
    properties:
      signed_on:
        type: string
        x-omitempty: false
        example: "2019-07-18T11:38:13.144674+0000"
      project_id:
        type: string
        x-omitempty: false
        example: "e1e30240-a722-4c82-a648-121681d959c7"
      project_sfid:
        type: string
        x-omitempty: false
        example: "a2g17000000hyxNAAA"
      project_name:
        type: string
        example: "Appium"
        x-omitempty: false
      project_type:
        type: string
        example: "Foundation"
        x-omitempty: false
      signatory_name:
        type: string
        example: "John Doe"
        x-omitempty: false
      project_logo:
        type: string
        example: "http://wwwlinuxfoundation.org/logo.gif"
        x-omitempty: false
      cla_group_name:
        type: string
        example: "gRPC"
        x-omitempty: false
      ccla_url:
        type: string
        x-omitempty: false

  corporate-contributor-list:
    type: object
    title: corporate contributors list
    properties:
      list:
        type: array
        items:
          $ref: '#/definitions/corporate-contributor'

  corporate-contributor:
    type: object
    properties:
      name:
        type: string
        example: "john doe"
        x-omitempty: false
      linux_foundation_id:
        type: string
        example: "john.doe"
        x-omitempty: false
      github_id:
        type: string
        example: "123456"
        x-omitempty: false
      signature_version:
        type: string
        example: "v1"
        x-omitempty: false
      timestamp:
        type: string
        x-omitempty: false

  corporate-signature-input:
    type: object
    required:
      - project_sfid
      - cla_group_id
      - company_sfid
    properties:
      project_sfid:
        type: string
        example: 'a0941000005ouJFAAY'
        description: salesforce id of the project
      cla_group_id:
        type: string
        example: 'c4d71673-e9e8-4e26-a035-99e8334620e5'
        description: cla group id
        format: uuid
      company_sfid:
        type: string
        example: '0014100000Te0fMAAR'
        description: salesforce id of the company
      send_as_email:
        type: boolean
        example: 'false'
        description: send signing request as email. This should be set to true when requestor is not signatory.
      authority_name:
        type: string
        example: 'John Doe'
        description: name of the cla signatory
      authority_email:
        type: string
        example: 'john.doe@gmail.com'
        description: email of the cla signatory
        format: email
      return_url:
        type: string
        example: 'https://corporate.dev.lfcla.com/#/company/eb4d7d71-693f-4047-bf8d-10d0e7764969'
        description: on signing the document, page will get redirected to this url. This is valid only when send_as_email is false
        format: uri

  corporate-signature-output:
    type: object
    properties:
      signature_id:
        type: string
        description: id of the signature
      sign_url:
        type: string
        description: signing url

  create-cla-group-input:
    type: object
    properties:
      cla_group_name:
        type: string
        example: 'OpenCue'
        description: name of the cla group
      cla_group_description:
        type: string
        example: 'cla group created for OpenCue project'
        description: description of the cla group
      ccla_enabled:
        type: boolean
        example: true
        description: flag to indicate if ccla is enabled
      ccla_requires_icla:
        type: boolean
        example: true
        description: flag to indicate if corporate contributors requires to sign icla
      icla_enabled:
        type: boolean
        example: true
        description: flag to indicate if icla is enabled
      foundation_sfid:
        type: string
        example: 'a09410000182dD2AAI'
        description: foundation sfid under which this cla group is created
      project_sfid_list:
        description: list of projects under foundation for which this cla group is created
        type: array
        items:
          type: string
          example: 'a092M00001IV3znQAD'
      template_fields:
        description: template variables using which icla/ccla template will be created
        $ref: '#/definitions/create-cla-group-template'

  cla-group:
    type: object
    properties:
      cla_group_id:
        type: string
        example: 'b1e86e26-d8c8-4fd8-9f8d-5c723d5dac9f'
        description: id of the CLA group
        x-omitempty: false
      cla_group_name:
        type: string
        example: 'OpenCue'
        description: name of the CLA group
        x-omitempty: false
        minLength: 3
        maxLength: 256
      cla_group_description:
        type: string
        example: 'CLA group created for OpenCue project'
        description: description of the CLA group
        x-omitempty: false
        minLength: 3
        maxLength: 256
      ccla_enabled:
        type: boolean
        example: true
        description: flag to indicate if CCLA is enabled
        x-omitempty: false
      ccla_requires_icla:
        type: boolean
        example: true
        description: flag to indicate if corporate contributors requires to sign ICLA
        x-omitempty: false
      icla_enabled:
        type: boolean
        example: true
        description: flag to indicate if ICLA is enabled
        x-omitempty: false
      foundation_sfid:
        type: string
        example: 'a09410000182dD2AAI'
        description: foundation sfid under which this CLA group is created
        x-omitempty: false
      project_sfid_list:
        x-omitempty: false
        description: list of projects under foundation for which this CLA group is created
        type: array
        items:
          type: string
          example: 'a092M00001IV3znQAD'
      icla_pdf_url:
        description: template URL for ICLA document
        type: string
        example: 'https://cla-signature-files-dev.s3.amazonaws.com/contract-group/b1e86e26-d8c8-4fd8-9f8d-5c723d5dac9f/template/icla.pdf'
        x-omitempty: false
      ccla_pdf_url:
        description: template URL for CCLA document
        type: string
        example: 'https://cla-signature-files-dev.s3.amazonaws.com/contract-group/b1e86e26-d8c8-4fd8-9f8d-5c723d5dac9f/template/ccla.pdf'
        x-omitempty: false

  cla-group-validation-request:
    type: object
    properties:
      cla_group_name:
        type: string
        example: 'OpenCue'
        description: name of the CLA group
        x-omitempty: true
        x-nullable: true
        minLength: 3
        maxLength: 256
      cla_group_description:
        type: string
        example: 'CLA group created for OpenCue project'
        description: description of the CLA group
        x-omitempty: true
        x-nullable: true
        minLength: 3
        maxLength: 256

  cla-group-validation-response:
    type: object
    properties:
      valid:
        type: boolean
        example: 'true'
        description: returns true if the CLA Group validates, false otherwise
        x-omitempty: true
      validation-errors:
        x-omitempty: true
        description: list of CLA Group validation errors
        type: array
        items:
          type: string
          example: 'duplicate CLA Group name'

  error-response:
    type: object
    x-nullable: false
    title: Error Response
    description: Standard error format
    properties:
      Code:
        description: The error code
        example: "404"
        type: string
      Message:
        description: The error message
        example: "unable to find project Acme, Inc."
        type: string
